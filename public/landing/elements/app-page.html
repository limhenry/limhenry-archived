<link rel="import" href="/bower_components/app-layout/app-layout.html">
<link rel="import" href="/bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="/bower_components/paper-item/paper-item.html">
<link rel="import" href="/bower_components/carbon-route/carbon-route.html">
<link rel="import" href="/bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="/bower_components/iron-selector/iron-selector.html">
<link rel="import" href="/bower_components/carbon-route/carbon-location.html">
<link rel="import" href="/bower_components/platinum-sw/platinum-sw-register.html">
<link rel="import" href="/bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="/bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/app-layout/app-scroll-effects/effects/waterfall.html">
<link rel="import" href="/bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">

<dom-module id="app-page">
    <template>
        <style>
        :host {
            display: block;
            --primary-background-color: #E91E63;
            --secondary-background-color: #ECEFF1;
            --tertiary-background-color: #F50057;
            --highlight-background-color: #E64A19;
            --primary-text-color: rgba(255, 255, 255, 0.9);
            --secondary-text-color: rgba(0, 0, 0, 0.9);
            --paper-tab-ink: #fff;
            color: var(--primary-text-color);
        }

        app-header-layout{
            background: var(--primary-background-color);
        }
        
        app-toolbar {
            margin: 0 auto;
            max-width: 1400px;
            height: 200px;
        }
        
        app-toolbar [title] {
            font-size: 1.8em;
            font-weight: 300;
            margin-left: 24px;
        }
        
        paper-tabs {
            margin-left: 16px;
            width: 450px;
            --paper-tabs-selection-bar-color: #fff;
        }
        
        paper-toolbar {
            background: var(--primary-background-color);
        }
        
        paper-item {
            color: var(--secondary-text-color);
        }
        
        @media screen and (max-width: 840px) {
            app-toolbar {
                height: 64px;
                background: var(--primary-background-color);
            }
            app-toolbar [title] {
                font-size: 20px;
                font-weight: 400;
                margin-left: 12px;
                color: white;
            }
        }
        </style>
        <iron-media-query query="(min-width: 840px)" query-matches="{{wide}}" on-query-matches-changed="_onQueryChangeds"></iron-media-query>
        <app-drawer-layout force-narrow>
            <template is="dom-if" if="{{!wide}}">
                <app-drawer id="drawer" swipe-open>
                    <paper-toolbar class="tall">
                        <div class="bottom drawer-text">
                            <div>Henry Lim</div>
                            <div>limhenry.xyz</div>
                        </div>
                    </paper-toolbar>
                    <iron-selector attr-for-selected="id" selected="{{data.page}}">
                        <paper-item id="" drawer-toggle on-tap="scrollTop">Home</paper-item>
                        <paper-item id="project" drawer-toggle on-tap="scrollTop">Project</paper-item>
                        <paper-item id="contact" drawer-toggle on-tap="scrollTop">Contact</paper-item>
                        <paper-item id="resources" drawer-toggle on-tap="scrollTop">Resources</paper-item>
                    </iron-selector>
                </app-drawer>
            </template>
            <template is="dom-if" if="{{wide}}">
                <app-drawer id="drawer"></app-drawer>
            </template>
            <app-header-layout id="appHeaderLayout">
                <template is="dom-if" if="{{!wide}}">
                    <app-header reveals effects="waterfall fade-background">
                        <app-toolbar wide-layout$="{{wide}}">
                            <template is="dom-if" if="{{!wide}}">
                                <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
                                <div title>limhenry.xyz</div>
                            </template>
                        </app-toolbar>
                    </app-header>
                </template>
                <template is="dom-if" if="{{wide}}">
                    <app-header effects="waterfall fade-background">
                        <app-toolbar wide-layout$="{{wide}}">
                            <template is="dom-if" if="{{!wide}}">
                                <paper-icon-button icon="menu" drawer-toggle></paper-icon-button>
                                <div title>limhenry.xyz</div>
                            </template>
                            <template is="dom-if" if="{{wide}}">
                                <div title>limhenry.xyz</div>
                                <paper-tabs attr-for-selected="id" selected="{{data.page}}" bottom-item>
                                    <paper-tab id="" on-tap="scrollTop">HOME</paper-tab>
                                    <paper-tab id="project" on-tap="scrollTop">PROJECT</paper-tab>
                                    <paper-tab id="contact" on-tap="scrollTop">CONTACT</paper-tab>
                                    <paper-tab id="resources" on-tap="scrollTop">RESOURCES</paper-tab>
                                </paper-tabs>
                            </template>
                        </app-toolbar>
                    </app-header>
                </template>
                <div id="appContent">
                    <carbon-location route="{{route}}"></carbon-location>
                    <carbon-route route="{{route}}" pattern="/:page" data="{{data}}"></carbon-route>
                    <neon-animated-pages class="flex" attr-for-selected="id" selected="{{data.page}}" fallback-selection="404">
                        <home-page id="">
                            <footer-page></footer-page> 
                        </home-page>
                        <project-page id="project">
                            <footer-page></footer-page> 
                        </project-page>
                        <contact-page id="contact">
                            <footer-page></footer-page> 
                        </contact-page>
                        <resources-page id="resources">
                            <footer-page></footer-page> 
                        </resources-page>
                    </neon-animated-pages>
                </div>
            </app-header-layout>
        </app-drawer-layout>
        <!-- <platinum-sw-register auto-register></platinum-sw-register> -->
    </template>
    <script>
    Polymer({
        is: 'app-page',
        properties: {
            route: {
                type: Object,
                notify: true,
                observer: "_onDataChanged"
            },
            data: {
                type: Object,
                value: {
                    page: '/home/'
                },
                notify: true
                
            },
        },
        ready: function() {
            this.async(function() {
                if (!this.route.path && this.route.path == "/") {
                    this.set('route.path', '/');
                }
            }, 1);
        },
        _onQueryChangeds: function() {
            var div = this.$.appContent;
            if (this.wide == false) {
                div.style.paddingTop = "200px";
            }
            if (this.wide == true) {
                div.style.paddingTop = "0px"
            }
        },
        scrollTop: function() {
            document.body.scrollTop = "0";
        },
        _onDataChanged: function(){
            if(this.route.path == "/404"){
                window.location.replace('/404/')
            }
        }

    });
    </script>
</dom-module>
